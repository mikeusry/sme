---
import MainLayout from '../layouts/MainLayout.astro';
import ProductCard from '../components/products/ProductCard.astro';
import MaterialCalculator from '../components/products/MaterialCalculator.astro';
import ProductImage from '../components/ProductImage.astro';
import ExperienceFarm from '../components/ExperienceFarm.astro';
import { getFeaturedProducts, getProductBySlug } from '../lib/products';

// Soul Miner's Eden Homepage - Conversion-optimized dual-revenue stream design
// Ogilvy principle: "The consumer is not a moron, she's your wife"
// Apple principle: "Focus is saying no to 1,000 good ideas"

// Get featured products for showcase
const featuredProducts = getFeaturedProducts();

// Get specific hero products
const humusCompost = getProductBySlug('humus-compost');
const brownMulch = getProductBySlug('brown-mulch');
const topsoil = getProductBySlug('topsoil');

// MUX video playback ID for hero background
const muxPlaybackId = 'at00mmiQBibWz00AYKl2KvgHltoP7hzkRX02NtjzpMLX7w';
const muxPosterUrl = `https://image.mux.com/${muxPlaybackId}/thumbnail.jpg?time=0`;
const muxStreamUrl = `https://stream.mux.com/${muxPlaybackId}.m3u8`;
---

<MainLayout
	title="Soul Miner's Eden | Organic Compost & Land Management | Athens, GA"
	description="All-Natural compost delivered to your door. Premium landscape supply + eco-friendly land management services. Family-owned, Athens-based."
>
	<!-- Hero Section -->
	<section class="hero-section relative py-20 md:py-28 overflow-hidden">
		<!-- Background Video -->
		<div class="hero-video-wrapper">
			<video
				id="hero-video"
				class="hero-video"
				autoplay
				muted
				loop
				playsinline
				poster={muxPosterUrl}
				data-stream-url={muxStreamUrl}
			>
			</video>
		</div>
		<!-- Dark overlay for text readability -->
		<div class="hero-overlay"></div>

		<div class="container-custom relative z-10">
			<div class="max-w-4xl mx-auto text-center">
				<!-- Trust badge -->
				<div class="inline-flex items-center gap-2 bg-white/50 px-4 py-2 rounded-full shadow-md mb-6">
					<span class="text-sm font-semibold text-w">All-Natural • Family-Owned • Athens, GA</span>
				</div>

				<!-- Main headline -->
				<h1 class="text-4xl md:text-6xl lg:text-7xl font-display font-bold mb-6 text-white leading-tight">
					Cultivate What the Land Was Meant to Be
				</h1>

				<!-- Subheadline -->
				<p class="text-xl md:text-2xl mb-4 text-white max-w-3xl mx-auto leading-relaxed">
					We offer time produced, natural compost and regenerative grazing services, we help homeowners and professionals restore their own piece of Eden.
				</p>

				<!-- USP -->
				<p class="text-lg mb-10 text-white font-medium">
					All-Natural Compost. Locally Produced
				</p>

				<!-- Dual CTAs -->
				<div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
					<a href="/products" class="border-2 border-gray-400 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/70 text-lg px-10 py-4 rounded-lg font-semibold transition-colors">
						Shop Landscape Supply
					</a>
					<a href="/land-management" class="border-2 border-gray-400 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/70 text-lg px-10 py-4 rounded-lg font-semibold transition-colors">
						Explore Grazing Services
					</a>
				</div>

				<!-- Social proof -->
				<p class="mt-8 text-sm text-white">
					65-acre family farm • Serving North Georgia
				</p>
			</div>
		</div>
	</section>

	<!-- Value Props -->
	<section class="section bg-white">
		<div class="container-custom">
			<!-- Section header -->
			<div class="text-center mb-12">
				<h2 class="text-3xl md:text-4xl font-display font-bold text-warm-900 mb-4">
					Why Landscapers & Homeowners Choose Us
				</h2>
				<p class="text-lg text-warm-600 max-w-2xl mx-auto">
					From our 65-acre Athens farm to your property—thoughtfully produced materials, delivered with care.
				</p>
			</div>

			<!-- Value prop grid - 3 across -->
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
				<!-- All Natural Compost -->
				<div class="feature-box">
					<h3 class="text-xl font-bold mb-2 text-warm-900">All Natural Compost</h3>
					<p class="text-warm-600">Zero biosolids. No fillers. Just clean, biologically active compost made on-site under strict quality control.</p>
				</div>

				<!-- Grown & Managed the Right Way -->
				<div class="feature-box">
					<h3 class="text-xl font-bold mb-2 text-warm-900">Grown & Managed the Right Way</h3>
					<p class="text-warm-600">We work with the land, not against it—using natural processes that improve soil health, plant strength, and long-term performance. The way God intended.</p>
				</div>

				<!-- Local Delivery -->
				<div class="feature-box">
					<h3 class="text-xl font-bold mb-2 text-warm-900">Local Delivery</h3>
					<p class="text-warm-600">We sell trailer loads and by supersacks throughout the Athens area. Volume pricing available for landscapers and contractors.</p>
					<span class="text-sm text-primary-600 font-semibold mt-4 block">$40 base + $1.25 per mile after 20 miles</span>
				</div>
			</div>

			<!-- Family-Owned - Full width -->
			<div class="feature-box text-center max-w-2xl mx-auto">
				<h3 class="text-xl font-bold mb-2 text-warm-900">Family-Owned from Day One</h3>
				<p class="text-warm-600">Built on faith-driven stewardship and a commitment to doing honest work well. Proudly serving the Athens community as a Southland Organics company.</p>
			</div>
		</div>
	</section>

	<!-- Featured Products - Showcase top sellers -->
	<section class="section bg-warm-50">
		<div class="container-custom">
			<!-- Section header with category emphasis -->
			<div class="text-center mb-12">
				<h2 class="text-3xl md:text-4xl font-display font-bold text-warm-900 mb-4">
					Premium Landscape Supply
				</h2>
				<p class="text-lg text-warm-600 max-w-2xl mx-auto">
					Bulk delivery of organic compost, premium mulch, and quality soil—everything you need for thriving landscapes.
				</p>
			</div>

			<!-- Product showcase grid with REAL data -->
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
				{humusCompost && (
					<ProductCard product={humusCompost} variant="featured" />
				)}

				{brownMulch && (
					<ProductCard product={brownMulch} variant="default" />
				)}

				{topsoil && (
					<ProductCard product={topsoil} variant="default" />
				)}
			</div>

			<!-- View all CTA -->
			<div class="text-center">
				<a href="/products" class="btn-primary text-lg px-10 py-4">
					View All Products
				</a>
				<p class="mt-4 text-sm text-warm-600">
					<a href="/resources/contractor-program" class="font-semibold text-primary-600 hover:text-primary-700">
						Contractor pricing available
					</a> • Volume discounts • Account terms
				</p>
			</div>
		</div>
	</section>

	<!-- Land Management Services -->
	<section class="section bg-gradient-to-br from-primary-500 to-primary-600 text-white">
		<div class="container-custom">
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
				<!-- Content column -->
				<div>
					<div class="inline-block bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full mb-6">
						<span class="text-sm font-semibold">New Service Offering</span>
					</div>

					<h2 class="text-3xl md:text-5xl font-display font-bold mb-6 leading-tight">
						Eden Grazing Services
					</h2>

					<p class="text-xl mb-6 text-primary-50 leading-relaxed">
						Sustainable land management through rotational grazing—lowering maintenance costs while restoring soil health and biodiversity.
					</p>

					<p class="text-lg mb-6 font-semibold">
						30–50% cost savings compared to traditional mowing
					</p>

					<p class="text-lg mb-3 text-primary-100">Ideal for:</p>
					<div class="flex flex-wrap gap-3 mb-6">
						<span class="bg-white/20 px-4 py-2 rounded-full">Retention ponds</span>
						<span class="bg-white/20 px-4 py-2 rounded-full">Solar farms</span>
						<span class="bg-white/20 px-4 py-2 rounded-full">HOAs & large properties</span>
					</div>

					<p class="text-lg text-primary-100">
						Zero chemicals • Natural fertilization • Fully eco-friendly
					</p>
				</div>

				<!-- Image column -->
				<div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
					<div class="bg-primary-300 h-80 rounded-xl flex items-center justify-center">
						<span class="text-primary-600 text-sm">Grazing Animals Image</span>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Material Calculator - INTEGRATED for conversion -->
	<section class="section bg-white">
		<div class="container-custom">
			<MaterialCalculator />
		</div>
	</section>

	<!-- Trust & Social Proof -->
	<section class="section bg-primary-50">
		<div class="container-custom">
			<div class="max-w-5xl mx-auto">
				<!-- Stats -->
				<div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
					<div class="text-center">
						<div class="text-4xl font-bold text-primary-600 mb-2">500+</div>
						<div class="text-sm text-warm-600">Cubic Yards Monthly</div>
					</div>
					<div class="text-center">
						<div class="text-4xl font-bold text-primary-600 mb-2">65</div>
						<div class="text-sm text-warm-600">Acre Working Farm</div>
					</div>
					<div class="text-center">
						<div class="text-4xl font-bold text-primary-600 mb-2">100%</div>
						<div class="text-sm text-warm-600">Organic</div>
					</div>
					<div class="text-center">
						<div class="text-4xl font-bold text-primary-600 mb-2">24hr</div>
						<div class="text-sm text-warm-600">Delivery Turnaround</div>
					</div>
				</div>

				<!-- Trust badges -->
				<div class="flex flex-wrap justify-center gap-4">
					<span class="trust-badge">Organic</span>
					<span class="trust-badge">Naturally Grown</span>
					<span class="trust-badge">Family-Owned</span>
					<span class="trust-badge">Athens Local</span>
					<span class="trust-badge">Southland Organics Company</span>
				</div>
			</div>
		</div>
	</section>

	<!-- Experience the Farm Life - Before Footer -->
	<ExperienceFarm />
</MainLayout>

<style>
	/* Hero section video background styles */
	.hero-section {
		position: relative;
		isolation: isolate; /* Creates a new stacking context */
	}

	.hero-video-wrapper {
		position: absolute;
		inset: 0;
		z-index: -2;
		overflow: hidden;
	}

	.hero-video {
		position: absolute;
		top: 50%;
		left: 50%;
		min-width: 100%;
		min-height: 100%;
		width: auto;
		height: auto;
		transform: translate(-50%, -50%);
		object-fit: cover;
	}

	.hero-overlay {
		position: absolute;
		inset: 0;
		z-index: -1;
		background-color: rgba(0, 0, 0, 0.5);
	}
</style>

<script is:inline src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
<script is:inline>
	document.addEventListener('DOMContentLoaded', function() {
		var video = document.getElementById('hero-video');
		if (!video) return;

		var streamUrl = video.dataset.streamUrl;
		if (!streamUrl) return;

		if (video.canPlayType('application/vnd.apple.mpegurl')) {
			video.src = streamUrl;
			video.play().catch(function() {});
		} else if (typeof Hls !== 'undefined' && Hls.isSupported()) {
			var hls = new Hls();
			hls.loadSource(streamUrl);
			hls.attachMedia(video);
			hls.on(Hls.Events.MANIFEST_PARSED, function() {
				video.play().catch(function() {});
			});
		}
	});
</script>

