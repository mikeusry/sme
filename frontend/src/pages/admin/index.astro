---
/**
 * Admin Dashboard
 *
 * Overview of site health, content status, and quick actions
 */

import AdminLayout from '../../layouts/AdminLayout.astro';

// Quick stats - in real implementation, these would come from API/Supabase
const stats = {
  pages: 8,
  products: 12,
  blogPosts: 8,
  fakeContent: 2, // sections marked as fake
};

const recentActivity = [
  { action: 'Page updated', target: '/about', time: 'Today' },
  { action: 'Page updated', target: '/contact', time: 'Today' },
  { action: 'Header/Footer added', target: 'All pages', time: 'Today' },
  { action: 'Content extracted', target: '12 products', time: 'Today' },
];

const contentStatus = [
  { page: 'Home', status: 'draft', hasRealContent: true },
  { page: 'About', status: 'draft', hasRealContent: true, fakeSection: 'The Farm' },
  { page: 'Contact', status: 'draft', hasRealContent: true, fakeSection: 'FAQ' },
  { page: 'Products', status: 'draft', hasRealContent: true },
  { page: 'Land Management', status: 'not started', hasRealContent: false },
];
---

<AdminLayout title="Dashboard" description="Overview of Soul Miner's Eden website status">
  <!-- Stats Grid -->
  <div class="admin-grid-4" style="margin-bottom: 2rem;">
    <div class="admin-card">
      <div class="admin-stat">
        <div class="stat-value">{stats.pages}</div>
        <div class="stat-label">Pages</div>
      </div>
    </div>
    <div class="admin-card">
      <div class="admin-stat">
        <div class="stat-value">{stats.products}</div>
        <div class="stat-label">Products</div>
      </div>
    </div>
    <div class="admin-card">
      <div class="admin-stat">
        <div class="stat-value">{stats.blogPosts}</div>
        <div class="stat-label">Blog Posts</div>
      </div>
    </div>
    <div class="admin-card">
      <div class="admin-stat">
        <div class="stat-value" style="color: #d946ef;">{stats.fakeContent}</div>
        <div class="stat-label">Fake Sections</div>
      </div>
    </div>
  </div>

  <div class="admin-grid-2">
    <!-- Content Status -->
    <div class="admin-card">
      <div class="admin-card-header">
        <h2 class="admin-card-title">Content Status</h2>
      </div>
      <div class="admin-card-body">
        <table style="width: 100%; border-collapse: collapse; font-size: 0.875rem;">
          <thead>
            <tr style="border-bottom: 1px solid #e7e5e4;">
              <th style="text-align: left; padding: 0.5rem; color: #78716c;">Page</th>
              <th style="text-align: left; padding: 0.5rem; color: #78716c;">Status</th>
              <th style="text-align: left; padding: 0.5rem; color: #78716c;">Issues</th>
            </tr>
          </thead>
          <tbody>
            {contentStatus.map(item => (
              <tr style="border-bottom: 1px solid #e7e5e4;">
                <td style="padding: 0.5rem;">{item.page}</td>
                <td style="padding: 0.5rem;">
                  <span class={`admin-badge admin-badge-${item.status === 'draft' ? 'warning' : 'error'}`}>
                    {item.status}
                  </span>
                </td>
                <td style="padding: 0.5rem; color: #78716c;">
                  {item.fakeSection ? (
                    <span style="color: #d946ef;">Fake: {item.fakeSection}</span>
                  ) : item.hasRealContent ? (
                    <span style="color: #22c55e;">Real content</span>
                  ) : (
                    <span style="color: #ef4444;">Needs content</span>
                  )}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="admin-card">
      <div class="admin-card-header">
        <h2 class="admin-card-title">Recent Activity</h2>
      </div>
      <div class="admin-card-body">
        <ul style="list-style: none; font-size: 0.875rem;">
          {recentActivity.map(item => (
            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e7e5e4; display: flex; justify-content: space-between;">
              <span>
                <strong>{item.action}</strong>
                <span style="color: #78716c;"> - {item.target}</span>
              </span>
              <span style="color: #78716c; font-size: 0.75rem;">{item.time}</span>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="admin-card" style="margin-top: 2rem;">
    <div class="admin-card-header">
      <h2 class="admin-card-title">Quick Actions</h2>
    </div>
    <div class="admin-card-body">
      <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="/admin/brand" style="display: inline-flex; align-items: center; padding: 0.5rem 1rem; background: #b59289; color: white; border-radius: 6px; text-decoration: none; font-size: 0.875rem; font-weight: 500;">
          View Brand Guide
        </a>
        <a href="/" target="_blank" style="display: inline-flex; align-items: center; padding: 0.5rem 1rem; background: #f5f5f4; color: #44403c; border: 1px solid #e7e5e4; border-radius: 6px; text-decoration: none; font-size: 0.875rem; font-weight: 500;">
          Preview Site
        </a>
      </div>
    </div>
  </div>
</AdminLayout>
