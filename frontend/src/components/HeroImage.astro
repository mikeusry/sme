---
/**
 * HeroImage Component
 *
 * Specialized component for hero/banner images with optimal settings
 * for large, impactful visuals
 *
 * @example
 * <HeroImage
 *   publicId="banners/farm-landscape.jpg"
 *   alt="Soul Miner's Eden Farm"
 *   height={600}
 * />
 */

import CloudinaryImage from './CloudinaryImage.astro';

export interface Props {
  /** Image path within Cloudinary */
  publicId: string;
  /** Alt text for accessibility */
  alt: string;
  /** Custom height (default: 800px) */
  height?: number;
  /** Additional CSS classes */
  class?: string;
  /** Apply overlay effect */
  overlay?: boolean;
  /** Loading priority (default: eager for hero images) */
  loading?: 'lazy' | 'eager';
  /** Additional HTML attributes */
  [key: string]: any;
}

const {
  publicId,
  alt,
  height = 800,
  class: className = '',
  overlay = false,
  loading = 'eager',
  ...rest
} = Astro.props;
---

<div class={`hero-image-container ${overlay ? 'has-overlay' : ''} ${className}`}>
  <CloudinaryImage
    publicId={publicId}
    alt={alt}
    width={1920}
    height={height}
    crop="fill"
    gravity="auto"
    quality="auto"
    format="auto"
    responsive={true}
    loading={loading}
    fetchpriority="high"
    class="hero-image"
    {...rest}
  />
  {overlay && <div class="hero-overlay"></div>}
</div>

<style>
  .hero-image-container {
    position: relative;
    width: 100%;
    overflow: hidden;
    border-radius: 0.5rem;
  }

  .hero-image {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  .has-overlay .hero-image {
    filter: brightness(0.85);
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0.3) 100%
    );
    pointer-events: none;
  }

  @media (max-width: 768px) {
    .hero-image-container {
      border-radius: 0;
    }
  }
</style>
